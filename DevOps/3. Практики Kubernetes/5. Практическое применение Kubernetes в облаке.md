# Урок 5. Практическое применение Kubernetes в облаке

Практическое применение #Kubernetes в облаке
# Для чего подходит Kubernetes

**Высоконагруженные приложения.** Kubernetes отлично подходит для высоконагруженных приложений. Сфера highload давно считает k8s стандартом разработки таких сервисов.

Основная задача Kubernetes в этой сфере – это гибкое масштабирование приложений и инфраструктуры. Ключевой инструмент Kubernetes – это балансировщик Ingress, который позволяет перераспределять нагрузку между экземплярами приложений и не пропускать поступающие запросы.

**Масштабируемые Big Data-проекты.** Аналогичная задача присутствует в рамках Big Data проектов. Они могут принимать в себя до терабайта данных в час и при этом должны сохранять доступность и отрабатывать даже самые объемные запросы.

**Исключение поддержки IaaS — переход на уровень PaaS.** Используя IaaS, заказчики вынуждены самостоятельно настраивать сетевое взаимодействие, выбирать виртуальные машины и ОС для них. Использование Kubernetes позволяет закрыть эти рутинные задачи благодаря переходу на уровень выше – к **Platform** as a **Service** (платформа как услуга, PaaS). Как правило, PaaS дороже стандартных инфраструктурных сервисов, но окупается на длительной дистанции по трудозатратам. Благодаря тому, что задачи на уровне IaaS уже закрыты, можно сконцентрироваться на одной из немаловажных задач при разработке приложений — автоматизации.

**Для автоматизации линии сборки приложения и запуска в прод.** С Kubernetes это возможно благодаря простому и стандартизированному интерфейсу kubectl и всевозможным интеграциям с сервисами сборки и доставки кода.

**Переход в облако.** Поддержка Kubernetes на ресурсах on-premise может оказаться довольно непростой задачей. Например, бизнес может столкнуться с нехваткой оборудования для обеспечения грамотного масштабирования. Поэтому Kubernetes – это одна из главных причин мигрировать свои сервисы и разрабатываемые приложения в облако.

# Для чего не подходит Kubernetes

**Дополнительный уровень абстракции усложняет систему.**  Если речь идет о развертывании сложных систем наподобие CRM, ERP, систем управления баз данных и корпоративных хранилищ, заказчики предпочитают разворачивать их отдельно. Это изначально сложные системы со своими уровнями абстракции, которые необходимо поддерживать.

●       Экосистема изобилует специфическими понятиями

●       Довольно объемная документация

●       Высокие эксплуатационные расходы

●       Многокомпонентность системы

# Альтернативы Kubernetes

Существуют различные альтернативы классическому Kubernetes:

●       Docker Compose

●       Docker Swarm

●       Vagrant

●       Cloudify

●       Cloud Managed Kubernetes в beeline cloud

●       Azure Container Services

●       Heroku

●       Rancher

●       OpenShift

# Плюсы использования Kubernetes в облаке

Рассмотрим плюсы использования Kubernetes в облаке.

**Поддержка инфраструктуры полностью лежит на вендоре.** При развертывании k8s на базе собственной инфраструктуры задача по обслуживанию ресурсов и распределении нагрузки остается на заказчике. Кроме того, если речь идет про высоконагруженные приложения и масштабирование, придется прогнозировать утилизацию инфраструктуры. При использовании Kubernetes в облаке все эти вопросы переходят в зону ответственности облачного провайдера.

**Не нужно самому настраивать размеры виртуальных машин.** Еще одной проблемой при развертывании k8s на самостоятельно может стать подбор правильных параметров для виртуальных машин (нод) Kubernetes. В облаке, как правило, уже заложены определенные возможности для работы кластеров с оптимальными параметрами.

**Не нужно самому настраивать сеть.** Не стоит забывать и про задачу проектирования сетевой схемы. Для ее решения необходимо точно знать, какие ноды (мастеры или воркеры) должны «смотреть» в интернет, а какие должны находиться только в контуре инфраструктуры и быть доступны администраторам. В случае с Kubernetes в облаке эту боль тоже закрывает сервис-провайдер.

**Интерфейс управления доступен 24/7, как и сам сервис.**. При настройке кластера не обойтись без интерфейса — командной строки или веб UI. Облачный провайдер гарантирует не только круглосуточный доступ к нему, но и мониторинг нагрузки, который обеспечивает своевременное реагирование на проблемы с приложением.

# Практическое применение

Для чего на практике используется Kubernetes? Вот наиболее распространенные сценарии использования этого инструмента.

**Хостинг высоконагруженных сервисов и сайтов.** Kubernetes обеспечивает возможность масштабирования и балансировки при высокой нагрузке и защищает приложения от перегрузок, поэтому размещение высоконагруженных приложений — наиболее популярный сценарий использования k8s.

**Работа биллинга и e-com-компаний.** Согласитесь, ошибка от сайта в момент оплаты покупок или заказа доставки — не самая приятная ситуация как для пользователя сайта, так и для его владельца. Поэтому для размещения подобных проектов нередко используются платформенные сервисы для разработки и хостинга своих решений.

**Использование простого инструмента в облаке компанией с низкой DevOps-экспертизой.** Kubernetes упрощает множество вопросов, связанных с автоматизацией выпуска приложений в промышленную эксплуатацию, и помогает командам с низкой экспертизой в DevOps сконцентрироваться на разработке бизнес-функционала, не отвлекаясь на технические трудности развертывания и запуска приложений.

**Снижение time to market для выпуска приложений, исправления багов.** Грамотно выстроенная автоматизация поможет грамотно сократить time-to-market продукта, ускорить выпуск новых фичей, оперативно исправлять баги или откатывать приложение с помощью понятного и задокументированного интерфейса Kubectl.

# Подведем итоги

●       Kubernetes подходил для размещения высоконагруженных приложений и масштабируемых Big Data проектов. Кроме того, k8s позволяет закрыть рутинные задачи, характерные для использования IaaS, благодаря переходу на уровень выше — к PaaS.

●       Также Kubernetes подходит как инструмент автоматизации линии сборки приложения и запуска в прод.

●       Поддержка Kubernetes на ресурсах on-premise может оказаться довольно непростой задачей, поэтому Kubernetes — это одна из главных причин мигрировать в облако.

●       У Kubernetes есть ряд ограничений. Дополнительный уровень абстракции усложняет систему, поэтому сложные системы вроде CRM, ERP, СУБД лучше разворачивать без использования k8s. К тому же, экосистема изобилует специфическими понятиями и документация k8s довольно объемна. Внедрение Kubernetes грозит высокими эксплуатационными расходами.

●       Существуют ряд альтернатив классическому Kubernetes — Docker Compose, Docker Swarm, Vagrant, Cloudify, Cloud Managed Kubernetes в beeline cloud и другие.

●       Самостоятельное внедрение Kubernetes может обернуться высокими эксплуатационными расходами, поэтому заказчики предпочитают использовать облачные сервисы Kubernetes. Среди их плюсов — поддержка инфраструктуры вендором, отсутствие необходимости настраивать ноды и сеть, гарантированный круглосуточный доступ к интерфейсу управления.

●       На практике с помощью Kubernetes решают такие сложные задачи, как хостинг высоконагруженных сервисов и сайтов, размещение систем биллинга, автоматизация выпуска приложений в компаниях с низкой экспертизой в DevOps, автоматизация CI/CD, снижение time-to-market цифровых продуктов.